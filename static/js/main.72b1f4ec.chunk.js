(this["webpackJsonpmusic-club-react"]=this["webpackJsonpmusic-club-react"]||[]).push([[0],{116:function(e,t,n){e.exports={RoundListItem:"RoundListItem_RoundListItem__CuIYf",roundIconOverlay:"RoundListItem_roundIconOverlay__zB3wt",disk:"RoundListItem_disk__3DY7c"}},117:function(e,t,n){e.exports={memberHeader:"MemberHeader_memberHeader__1lvVu",memberIcon:"MemberHeader_memberIcon__lwl3p"}},118:function(e,t,n){e.exports={RoundParticipantsKey:"RoundParticipantsKey_RoundParticipantsKey__29vbM",participantsList:"RoundParticipantsKey_participantsList__1kpkK"}},146:function(e,t,n){e.exports={RoundHeader:"RoundHeader_RoundHeader__3gthg"}},147:function(e,t,n){e.exports={PickedTrackTable:"PickedTrackTable_PickedTrackTable__3IbT-",tracksToggleButton:"PickedTrackTable_tracksToggleButton__1bKnv"}},148:function(e,t,n){e.exports={PickedTrackTableRow:"PickedTrackTableRow_PickedTrackTableRow__1rP_v",pickerList:"PickedTrackTableRow_pickerList__HsEPO"}},211:function(e,t,n){e.exports={ParticipantsList:"ParticipantsList_ParticipantsList__12mLe"}},212:function(e,t,n){e.exports={MembersList:"MembersList_MembersList__2ZCur",memberIcon:"MembersList_memberIcon__1Xvzd"}},213:function(e,t,n){e.exports={PastRoundsList:"PastRoundsList_PastRoundsList__1DUki"}},219:function(e,t,n){e.exports={AlbumList:"AlbumList_AlbumList__2b-Cx"}},235:function(e,t,n){},236:function(e,t,n){},350:function(e,t,n){},358:function(e,t){},362:function(e,t,n){},363:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(199),s=n.n(c),i=(n(24),n(235),n(21)),o=n(18),u=(n(236),n(3));var l=function(){return Object(u.jsx)("nav",{className:"NavBar navbar sticky-top navbar-expand-sm navbar-light",children:Object(u.jsxs)("div",{className:"container px-2",children:[Object(u.jsx)(i.b,{className:"navbar-brand",to:"/",children:"Music Club"}),Object(u.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(u.jsx)("span",{className:"navbar-toggler-icon"})}),Object(u.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(u.jsx)("ul",{className:"navbar-nav",children:Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(i.b,{className:"nav-link",to:"/",children:"Rounds"})})})})]})})},b=n(8),d=n.n(b),m=n(13),j=n(11),p=n(73),f=n.n(p),h=n(20),x=n(56),O=n.n(x);var v=function(e){var t=e.album;if(null===t)return null;var n=h.DateTime.fromISO(t.releaseDate).year;return Object(u.jsxs)("div",{className:"".concat(O.a.AlbumHeader," mb-5"),children:[Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:O.a.albumInfo,children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:t.title}),Object(u.jsx)("h2",{className:"mb-5",children:t.artists.join(", ")})]}),Object(u.jsxs)("div",{className:O.a.albumMetadata,children:[Object(u.jsxs)("p",{className:"mb-2",children:[n,"  \u2022  ",t.tracks.length," tracks"]}),Object(u.jsx)("div",{className:O.a.genreTagList,children:t.artistGenres.map((function(e){return Object(u.jsx)("div",{className:O.a.genreTag,children:Object(u.jsx)("p",{children:e})},e)}))})]})]})}),Object(u.jsx)("div",{className:O.a.albumImgContainer,children:Object(u.jsx)("img",{className:"".concat(O.a.albumImg),src:t.imageUrl,alt:"Album cover art"})})]})},g=n(16),k=n(36),y=n.n(k),_=n(153),N=n(379),I=n(376),w=n(381),L=n(382),A=n(380),P=n(191),T=n(67);var R=function(e){var t=100*e.aspectRatio+"%";return Object(u.jsx)("div",{style:{position:"relative",width:"100%",paddingBottom:t},children:Object(u.jsx)("div",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:"#f3f3f3",borderRadius:"5px"}})})};function S(e,t){for(var n={},a=0;a<e.length;a++)n[e[a]]=t[a].brighten(2).desaturate().hex();return n}function C(e,t){for(var n={},a=0;a<e.length;a++)n[e[a]]=t[a].alpha(.6).hex();return n}function M(e,t,n){var a,r=[],c=Object(g.a)(e);try{for(c.s();!(a=c.n()).done;){var s=a.value;if("audioFeatures"in s){var i,o=1,u=Object(g.a)(t);try{for(u.s();!(i=u.n()).done;){var l=i.value;r.push({x:o,y:s.audioFeatures[l],color:n[l]}),o++}}catch(b){u.e(b)}finally{u.f()}}}}catch(b){c.e(b)}finally{c.f()}return r}function D(e,t,n){var a,r=[],c=Object(g.a)(e);try{for(c.s();!(a=c.n()).done;){var s=a.value;if("audioFeatures"in s){var i,o=1,u=Object(g.a)(t);try{for(u.s();!(i=u.n()).done;){var l=i.value;r.push({x:o+.25*Math.random()-.125,y:s.audioFeatures[l],color:n[l],label:s.title}),o++}}catch(b){u.e(b)}finally{u.f()}}}}catch(b){c.e(b)}finally{c.f()}return r}var F=function(e){var t=e.tracks,n=e.features,r=e.colors,c=e.title,s=Object(a.useState)([]),i=Object(j.a)(s,2),o=i[0],l=i[1],b=Object(a.useState)([]),p=Object(j.a)(b,2),f=p[0],h=p[1],x=Object(a.useState)(!1),O=Object(j.a)(x,2),v=O[0],g=O[1];r=r.map((function(e){return y()(e)})),Object(a.useEffect)((function(){var e=function(){var e=Object(m.a)(d.a.mark((function e(){var a,c,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return");case 2:a=C(n,r),c=S(n,r),s=M(t,n,c),i=D(t,n,a),l(s),h(i),g(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]);var k=Object(u.jsx)(_.a,{style:{pointerEvents:"auto",userSelect:"auto",touchAction:"auto"}});return v?Object(u.jsxs)(N.a,{containerComponent:T.isMobile?k:Object(u.jsx)(_.a,{}),width:250,height:250,padding:{left:30,right:30,top:60,bottom:25},domainPadding:{x:[40,40]},children:[Object(u.jsx)(I.a,{boxWidth:35,data:o,categories:{x:n},style:{min:{stroke:function(e){return e.datum.color}},max:{stroke:function(e){return e.datum.color}},median:{stroke:"white"},q1:{fill:function(e){return e.datum.color}},q3:{fill:function(e){return e.datum.color}}}}),Object(u.jsx)(w.a,{style:{data:{fill:function(e){return e.datum.color}}},size:3,data:f,labels:f.map((function(e){return e.label})),labelComponent:Object(u.jsx)(L.a,{cornerRadius:0,flyoutStyle:{strokeWidth:0,fill:"black"},flyoutPadding:{top:2,bottom:2,left:5,right:5},style:{fontSize:10,fill:"white"},pointerLength:10,pointerWidth:5})}),Object(u.jsx)(A.a,{style:{tickLabels:{fontFamily:"Poppins",fontSize:10}}}),Object(u.jsx)(A.a,{dependentAxis:!0,domain:{y:[0,1]},tickValues:[0,.2,.4,.6,.8,1],tickFormat:function(e){return e.toFixed(1)},style:{tickLabels:{fontFamily:"Poppins",fontSize:10}}}),Object(u.jsx)(P.a,{text:c,x:125,y:30,textAnchor:"middle",style:{fontFamily:"Poppins",fontSize:16,fontWeight:"bold"}})]}):Object(u.jsx)(R,{aspectRatio:300/450})};var H=function(){var e=Object(o.f)().id,t=Object(a.useState)(null),n=Object(j.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var t=function(){var t=Object(m.a)(d.a.mark((function t(){var n,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://tb-music-club.herokuapp.com/api/album?id="+e);case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,c(a);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]),null===r?null:Object(u.jsxs)("div",{className:"".concat(f.a.AlbumView," mt-3"),children:[Object(u.jsx)(v,{album:r}),Object(u.jsxs)("table",{className:"table mb-4",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{scope:"col",style:{width:"5%",textAlign:"right"},children:"#"}),Object(u.jsx)("th",{scope:"col",children:"Title"}),Object(u.jsx)("th",{scope:"col",style:{textAlign:"right"},children:"Length"})]})}),Object(u.jsx)("tbody",{children:r.tracks.map((function(e){var t=h.Duration.fromMillis(e.duration).toFormat("m:ss");return Object(u.jsxs)("tr",{children:[Object(u.jsxs)("td",{style:{textAlign:"right"},children:[e.trackNumber,"."]}),Object(u.jsx)("td",{children:e.title}),Object(u.jsx)("td",{style:{textAlign:"right"},children:t})]},e.trackNumber)}))})]}),Object(u.jsxs)("div",{className:f.a.chartGallery,children:[Object(u.jsx)("div",{className:f.a.chartArea,children:Object(u.jsx)(F,{tracks:r.tracks,features:["valence","energy","danceability"],colors:["Green","Red","Magenta"],title:"Mood"})}),Object(u.jsx)("div",{className:f.a.chartArea,children:Object(u.jsx)(F,{tracks:r.tracks,features:["speechiness","instrumentalness"],colors:["DodgerBlue","DarkOrange"],title:"Properties"})}),Object(u.jsx)("div",{className:f.a.chartArea,children:Object(u.jsx)(F,{tracks:r.tracks,features:["acousticness","liveness"],colors:["Sienna","Teal"],title:"Context"})})]})]})},E=(n(350),n(43)),z=n.n(E),V=n(211),J=n.n(V),B=n(60),U=n.n(B);function G(e){var t=e.member,n=e.sizeClass,a=e.isLoading,r=void 0!==a&&a,c=e.defaultFontColor,s=void 0===c?"white":c,o=e.loadingFontColor,l=void 0===o?"black":o,b=t.firstName[0].toUpperCase()+t.lastName[0].toUpperCase(),d=t.color,m=y()(d).darken(),j=Object(u.jsx)(i.b,{to:"/member/".concat(t.id),className:"".concat(U.a.link," ").concat(n),style:{textDecoration:"none","--defaultColor":d,"--hoverColor":m},children:Object(u.jsx)("p",{style:{color:s},children:b})}),p=Object(u.jsxs)(i.b,{to:"/member/".concat(t.id),className:"".concat(U.a.link," ").concat(n),style:{textDecoration:"none","--defaultColor":"transparent","--hoverColor":"transparent"},children:[Object(u.jsx)("div",{className:U.a.spinner,style:{"--c":d}}),Object(u.jsx)("p",{style:{color:l},children:b})]});return r?p:j}function K(e){var t=e.member,n=e.isLoading,a=e.defaultFontColor,r=e.loadingFontColor;return Object(u.jsx)(G,{member:t,sizeClass:U.a.MemberIconSmall,isLoading:n,defaultFontColor:a,loadingFontColor:r})}function W(e){var t=e.member,n=e.isLoading,a=e.defaultFontColor,r=e.loadingFontColor;return Object(u.jsx)(G,{member:t,sizeClass:U.a.MemberIconMedium,isLoading:n,defaultFontColor:a,loadingFontColor:r})}function X(e,t,n){var a,r=Object(g.a)(t);try{for(r.s();!(a=r.n()).done;){if(a.value.tracks.filter((function(t){return t.pickerIds.includes(e.id)})).length!==n)return!1}}catch(c){r.e(c)}finally{r.f()}return!0}var q=function(e){var t=e.participants,n=e.albums,a=e.picksPerParticipant;return Object(u.jsx)("div",{className:J.a.ParticipantsList,children:t.map((function(e){return Object(u.jsx)(W,{member:e,isLoading:!X(e,n,a),loadingFontColor:"white"},e.id)}))})};var Y=function(e){var t=e.club,n=Object(a.useState)(!1),r=Object(j.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(null),o=Object(j.a)(i,2),l=o[0],b=o[1],p=Object(a.useState)([]),f=Object(j.a)(p,2),x=f[0],O=f[1],v=Object(a.useState)(1),g=Object(j.a)(v,2),k=g[0],y=g[1],_=Object(a.useState)([]),N=Object(j.a)(_,2),I=N[0],w=N[1],L=Object(a.useState)([]),A=Object(j.a)(L,2),P=A[0],T=A[1];Object(a.useEffect)((function(){var e=function(){var e=Object(m.a)(d.a.mark((function e(){var n,a,r,c,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:if(n=(n=e.sent).sort((function(e,t){return e.number-t.number})),O(n),y(n[n.length-1].number+1),s(null!==t.currentRoundId),null!==t.currentRoundId){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,R(t.currentRoundId);case 11:if(a=e.sent,b(a),null!==a){e.next=15;break}return e.abrupt("return");case 15:return r=a.participantIds.map((function(e){return fetch("https://tb-music-club.herokuapp.com/api/member?id="+e).then((function(e){return e.json()}))})),e.next=18,Promise.all(r);case 18:return(c=e.sent).sort((function(e,t){return e.lastName<t.lastName?-1:e.lastName>t.lastName?1:e.firstName<t.firstName?-1:1})),w(c),i=a.albumIds.map((function(e){return fetch("https://tb-music-club.herokuapp.com/api/album?id="+e).then((function(e){return e.json()}))})),e.next=24,Promise.all(i);case 24:o=e.sent,T(o);case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();null!==t&&e()}),[t]);var R=function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://tb-music-club.herokuapp.com/api/round?id="+t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(m.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://tb-music-club.herokuapp.com/api/rounds");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(null===t)return Object(u.jsx)("div",{className:"".concat(z.a.CurrentRoundJumbotron," jumbotron mb-5"),style:{backgroundColor:"#f3f3f3"},children:Object(u.jsx)("div",{className:z.a.currentRoundThumbnail})});if(!c&&x.length>0){var C=x[x.length-1].endDate,M=h.DateTime.fromISO(C),D=Math.floor(h.DateTime.now().diff(M,"days").days),F="".concat(D," ").concat(1===D?"day":"days"," since the last round");return Object(u.jsx)("div",{className:"".concat(z.a.CurrentRoundJumbotron," jumbotron mb-5"),children:Object(u.jsx)("div",{className:"d-flex flex-column flex-grow-1 justify-content-between",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{className:"m-0",children:"Coming up"}),Object(u.jsxs)("h1",{className:"m-0",children:["Round ",k]}),Object(u.jsx)("p",{className:z.a.roundDate,children:F})]})})})}if(null===l)return Object(u.jsx)("div",{className:"".concat(z.a.CurrentRoundJumbotron," jumbotron mb-5"),style:{backgroundColor:"#f3f3f3"},children:Object(u.jsx)("div",{className:z.a.currentRoundThumbnail})});var H="https://tb-music-club.s3.us-west-2.amazonaws.com/round_thumbnails/"+l.id+".jpeg",E=h.DateTime.fromISO(l.startDate),V=Math.floor(h.DateTime.now().diff(E,"days").days)+1,J=E.toLocaleString(h.DateTime.DATE_FULL);return Object(u.jsxs)("div",{className:"".concat(z.a.CurrentRoundJumbotron," jumbotron d-flex justify-content-between mb-5"),children:[Object(u.jsxs)("div",{className:"d-flex flex-column flex-grow-1 justify-content-between",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{className:"m-0",children:"Now playing"}),Object(u.jsxs)("h1",{className:"m-0",children:["Round ",l.number]}),Object(u.jsx)("p",{className:z.a.roundDate,children:"Day ".concat(V," \u2022 Started ").concat(J)})]}),Object(u.jsx)(q,{participants:I,albums:P,picksPerParticipant:l.picksPerParticipant})]}),Object(u.jsx)("div",{className:z.a.currentRoundThumbnail,style:{backgroundImage:"url("+H+")"}})]})},Z=n(212),Q=n.n(Z);var $=function(e){var t=e.memberIds,n=Object(a.useState)([]),r=Object(j.a)(n,2),c=r[0],s=r[1];return Object(a.useEffect)((function(){if(null!==t){var e=function(){var e=Object(m.a)(d.a.mark((function e(){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return fetch("https://tb-music-club.herokuapp.com/api/member?id="+e).then((function(e){return e.json()}))})),e.next=3,Promise.all(n);case 3:a=e.sent,s(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[t]),Object(u.jsx)("div",{className:Q.a.MembersList,children:c.map((function(e){return Object(u.jsx)(K,{member:e},e.id)}))})},ee=n(213),te=n.n(ee),ne=n(116),ae=n.n(ne);var re=function(e){var t=e.round,n="https://tb-music-club.s3.us-west-2.amazonaws.com/round_thumbnails/"+t.id+".jpeg";return Object(u.jsxs)("div",{className:"".concat(ae.a.RoundListItem," position-relative m-4"),style:{backgroundImage:"url("+n+")"},children:[Object(u.jsx)("div",{className:ae.a.disk}),Object(u.jsx)(i.b,{to:"/round/"+t.id,children:Object(u.jsx)("div",{className:ae.a.roundIconOverlay})})]})};var ce=function(){return Object(u.jsx)("div",{className:"spinner-border text-dark",role:"status",children:Object(u.jsx)("span",{className:"sr-only"})})};var se=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),s=Object(j.a)(c,2),i=s[0],o=s[1];Object(a.useEffect)((function(){var e=function(){var e=Object(m.a)(d.a.mark((function e(){var t,n,a,c,s,i,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("04d9a851-61a1-476a-bc87-a3a30fc6a353");case 2:return t=e.sent,e.next=5,b();case 5:n=e.sent,a=[],c=Object(g.a)(n),e.prev=8,c.s();case 10:if((s=c.n()).done){e.next=18;break}if((i=s.value).id!==t.currentRoundId){e.next=14;break}return e.abrupt("continue",16);case 14:u={round:i},a.push(u);case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),c.e(e.t0);case 23:return e.prev=23,c.f(),e.finish(23);case 26:a.sort((function(e,t){return t.round.number-e.round.number})),r(a),o(!0);case 29:case"end":return e.stop()}}),e,null,[[8,20,23,26]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var l=function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://tb-music-club.herokuapp.com/api/club?id="+t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(m.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://tb-music-club.herokuapp.com/api/rounds");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=n.map((function(e){return Object(u.jsx)(re,{round:e.round},e.round.id)}));return Object(u.jsxs)("div",{className:"".concat(te.a.PastRoundsList," d-flex flex-column align-items-center"),children:[Object(u.jsx)("h2",{className:"mb-3",children:"Past Rounds"}),Object(u.jsx)("div",{className:"d-flex justify-content-center flex-wrap",children:i?p:Object(u.jsx)(ce,{})})]})};var ie=function(){var e=Object(a.useState)(null),t=Object(j.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(m.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://tb-music-club.herokuapp.com/api/club?id=04d9a851-61a1-476a-bc87-a3a30fc6a353");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,r(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(u.jsxs)("div",{className:"h-100",children:[Object(u.jsx)($,{memberIds:n?n.participantIds:null}),Object(u.jsx)(Y,{club:n}),Object(u.jsx)(se,{})]})},oe=n(74),ue=n.n(oe),le=n(117),be=n.n(le);var de=function(e){var t=e.member,n=Object(u.jsx)("div",{className:be.a.memberIcon,style:{backgroundColor:"#f3f3f3"}}),a=Object(u.jsx)("h1",{style:{color:"transparent"},children:"Tate Brasel"});return Object(u.jsxs)("div",{className:"".concat(be.a.memberHeader," mb-3"),children:[null===t?n:Object(u.jsx)("div",{className:be.a.memberIcon,style:{backgroundColor:t.color},children:Object(u.jsxs)("p",{children:[t.firstName[0],t.lastName[0]]})}),null===t?a:Object(u.jsxs)("h1",{children:[t.firstName," ",t.lastName]})]})},me=n(377);var je=function(e){var t=e.member,n=Object(a.useState)([]),r=Object(j.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)([]),o=Object(j.a)(i,2),l=o[0],b=o[1];Object(a.useEffect)((function(){var e=function(){var e=Object(m.a)(d.a.mark((function e(){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("https://tb-music-club.herokuapp.com/api/shared-votes?memberId=".concat(t.id,"&clubId=04d9a851-61a1-476a-bc87-a3a30fc6a353"));case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,s(a),r=a.map((function(e){return{name:e.member.firstName,count:e.sharedVotesCount>=0?e.sharedVotesCount:0,color:e.member.color}})),b(r);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]);var p=Object(u.jsx)(_.a,{style:{pointerEvents:"auto",userSelect:"auto",touchAction:"auto"}});return 0===l.length?Object(u.jsx)(R,{aspectRatio:300/450}):Object(u.jsxs)(N.a,{containerComponent:p,domainPadding:200/l.length,padding:{left:35,right:1,top:1,bottom:25},animate:{duration:500,easing:"cubic"},children:[Object(u.jsx)(me.a,{data:l,x:"name",y:"count",labels:c.map((function(e){return e.sharedVotesCount>=0?"":"NA"})),style:{data:{width:300/l.length,fill:function(e){return e.datum.color}},labels:{fontFamily:"Poppins",fontSize:12,fill:"#313131"}}}),Object(u.jsx)(A.a,{style:{tickLabels:{fontFamily:"Poppins",fontSize:12}}}),Object(u.jsx)(A.a,{dependentAxis:!0,style:{tickLabels:{fontFamily:"Poppins",fontSize:12}}})]})},pe=n(220);var fe=function(e){var t=e.member,n=Object(a.useState)([]),r=Object(j.a)(n,2),c=r[0],s=r[1];Object(a.useEffect)((function(){var e=function(){var e=Object(m.a)(d.a.mark((function e(){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("https://tb-music-club.herokuapp.com/api/member-genres?memberId=".concat(t.id));case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,r=a.map((function(e){return{text:e.genre,value:e.albumTitles.length}})),s(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]);var i={getWordColor:function(e){return function(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);for(var a="#",r=0;r<3;r++)a+=("00"+(t>>8*r&255).toString(16)).substr(-2);var c=y()(a).hsl();return a=c[2]>.6?y()(a).darken(1):a,(c=y()(a).hsl())[1]>.7&&c[2]<.6?y()(a).desaturate(1):a}(e.text)}};return 0===c.length?Object(u.jsx)(R,{aspectRatio:300/450}):Object(u.jsx)(pe.a,{words:c,options:{enableTooltip:!1,deterministic:!0,rotations:1,rotationAngles:[0],fontSizes:[8,56],fontFamily:"sans-serif"},callbacks:i})};var he=function(e){var t=e.member,n=Object(a.useState)([]),r=Object(j.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)([]),o=Object(j.a)(i,2),l=o[0],b=o[1];Object(a.useEffect)((function(){var e=function(){var e=Object(m.a)(d.a.mark((function e(){var n,a,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("https://tb-music-club.herokuapp.com/api/member-release?memberId=".concat(t.id,"&byDecade=true"));case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,r=y.a.scale(["#fafa6e","purple"]).mode("lch").colors(a.releases.length),b(r),c=a.releases.map((function(e,t){return{i:t,decade:e.releaseTimeLabel,count:e.albumTitles.length,albumTitles:e.albumTitles.join(",\n")}})),s(c);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]);var p=Object(u.jsx)(_.a,{style:{pointerEvents:"auto",userSelect:"auto",touchAction:"auto"}});return 0===c.length?Object(u.jsx)(R,{aspectRatio:300/450}):Object(u.jsxs)(N.a,{containerComponent:T.isMobile?p:Object(u.jsx)(_.a,{}),domainPadding:200/c.length,padding:{left:35,right:1,top:1,bottom:25},animate:{duration:500,easing:"cubic"},children:[Object(u.jsx)(me.a,{data:c,x:"decade",y:"count",labels:c.map((function(e){return e.albumTitles})),labelComponent:Object(u.jsx)(L.a,{constrainToVisibleArea:!0,cornerRadius:0,flyoutStyle:{strokeWidth:0,fill:"black"},flyoutPadding:{top:2,bottom:2,left:5,right:5},style:{fontSize:10,fill:"white"}}),style:{data:{width:300/c.length,fill:function(e){var t=e.datum;return l[t.i]}},labels:{fontFamily:"Poppins",fontSize:12,fill:"#313131"}}}),Object(u.jsx)(A.a,{style:{tickLabels:{fontFamily:"Poppins",fontSize:12}}}),Object(u.jsx)(A.a,{dependentAxis:!0,tickFormat:function(e){return Math.round(e)},style:{tickLabels:{fontFamily:"Poppins",fontSize:12}}})]})};var xe=function(){var e=Object(o.f)().id,t=Object(a.useState)(null),n=Object(j.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)([]),i=Object(j.a)(s,2),l=i[0],b=i[1],p=Object(a.useState)(""),f=Object(j.a)(p,2),x=f[0],O=f[1];Object(a.useEffect)((function(){var t=function(){var t=Object(m.a)(d.a.mark((function t(){var n,a,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e);case 2:return n=t.sent,c(n),t.next=6,g(n.participatedRoundIds);case 6:(a=t.sent).sort((function(e,t){return e.number-t.number})),b(a),r=h.DateTime.fromISO(a[0].startDate),O(r.toLocaleString(h.DateTime.DATE_FULL));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]);var v=function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://tb-music-club.herokuapp.com/api/member?id="+t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return fetch("https://tb-music-club.herokuapp.com/api/round?id="+e).then((function(e){return e.json()}))})),e.next=3,Promise.all(n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(u.jsx)("p",{children:"Loading..."});return Object(u.jsxs)("div",{className:"".concat(ue.a.MemberView," mt-3"),children:[Object(u.jsx)(de,{member:r}),Object(u.jsx)("div",{className:"d-flex",children:null===r||0===l.length?k:Object(u.jsx)("p",{children:"".concat(r.firstName," joined round #").concat(l[0].number," on ").concat(x," and has participated in ").concat(l.length-1," more since\u2014the latest being #").concat(l[l.length-1].number,".")})}),Object(u.jsxs)("div",{className:ue.a.chartGallery,children:[Object(u.jsx)("div",{className:ue.a.chartArea,children:Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{className:"mb-3",children:"Posted Genres"}),Object(u.jsx)(fe,{member:r})]})}),Object(u.jsx)("div",{className:ue.a.chartArea,children:Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{className:"mb-3",children:"Posted Albums By Decade"}),Object(u.jsx)(he,{member:r})]})}),Object(u.jsx)("div",{className:ue.a.chartArea,children:Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{className:"mb-3",children:"Shared Votes"}),Object(u.jsx)(je,{member:r})]})})]})]})},Oe=n(146),ve=n.n(Oe),ge=n(118),ke=n.n(ge);var ye=function(e){var t=e.participants;return Object(u.jsxs)("div",{className:ke.a.RoundParticipantsKey,children:[Object(u.jsx)("h2",{children:"Participants"}),Object(u.jsx)("div",{className:ke.a.participantsList,children:t.map((function(e){return Object(u.jsx)("div",{className:"".concat(ke.a.participantListItem),children:Object(u.jsx)(W,{member:e})},e.id)}))})]})};var _e=function(e){var t=e.round,n=e.participants,a=h.DateTime.fromISO(t.startDate),r=h.DateTime.fromISO(t.endDate),c=Math.floor(r.diff(a,"days").days),s=a.toLocaleString(h.DateTime.DATE_MED),i=r.toLocaleString(h.DateTime.DATE_MED),o=1===c?"1 day":c+" days";return Object(u.jsxs)("div",{className:"".concat(ve.a.RoundHeader," mt-3"),children:[Object(u.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("h1",{className:"m-0",children:["Round ",t.number]}),Object(u.jsxs)("h2",{className:"m-0",children:[s," - ",i," (",o,")"]})]}),Object(u.jsx)(ye,{participants:n})]}),t.description?Object(u.jsx)("p",{className:"".concat(ve.a.roundDescription," mt-4"),children:t.description}):null]})},Ne=n(219),Ie=n.n(Ne),we=n(42),Le=n.n(we),Ae=n(88),Pe=n(87),Te=n(375);var Re=function(e){var t=e.album,n=Object(a.useState)([]),r=Object(j.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(!1),o=Object(j.a)(i,2),l=o[0],b=o[1];Object(a.useEffect)((function(){var e=function(){var e=Object(m.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return");case 2:(n=t.tracks.map((function(e,t){return{x:t+1,y:e.pickerIds.length,y0:-1*e.pickerIds.length}}))).unshift({x:0,y:0,y0:0}),n.push({x:t.tracks.length+1,y:0,y0:0}),s(n),b(!0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]);var p=Object(u.jsx)(_.a,{responsive:!1,style:{pointerEvents:"auto",userSelect:"auto",touchAction:"auto"}});return l?Object(u.jsxs)(N.a,{containerComponent:T.isMobile?p:Object(u.jsx)(_.a,{responsive:!1}),width:200,height:50,padding:0,domain:{y:[-4.5,4.5]},children:[Object(u.jsx)(Te.a,{data:c,interpolation:"monotoneX"}),Object(u.jsx)(A.a,{style:{axis:{stroke:"transparent"},ticks:{stroke:"transparent"},tickLabels:{fill:"transparent"}}})]}):Object(u.jsx)(R,{aspectRatio:100/600})};var Se=function(e){var t=e.unfinishedParticipants;return Object(u.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(u.jsx)("p",{className:"".concat(Le.a.missingLabel," mb-2"),children:"Missing votes"}),Object(u.jsx)("div",{className:Le.a.missingVotesParticipantsList,children:t.map((function(e){return Object(u.jsx)(K,{member:e.participant,isLoading:!0,defaultFontColor:e.participant.color,loadingFontColor:"black"},e.participant.id)}))})]})},Ce=n(147),Me=n.n(Ce),De=n(148),Fe=n.n(De);var He=function(e){var t=e.pickedTrack,n=e.pickers,a=e.isTopTrack;return Object(u.jsxs)("tr",{className:Fe.a.PickedTrackTableRow,style:{backgroundColor:a?"#cde3bb":"white"},children:[Object(u.jsxs)("td",{style:{textAlign:"right"},children:[t.trackNumber,"."]}),Object(u.jsx)("td",{children:t.title}),Object(u.jsx)("td",{children:Object(u.jsx)("div",{className:Fe.a.pickerList,children:n.map((function(e){return Object(u.jsx)(K,{member:e},e.id)}))})})]})};var Ee=function(e){var t=e.album,n=e.participants,r=Object(a.useState)(!0),c=Object(j.a)(r,2),s=c[0],i=c[1],o=s?t.tracks:t.tracks.filter((function(e){return e.pickerIds.length>0}));return Object(u.jsxs)("div",{children:[Object(u.jsxs)("table",{className:"".concat(Me.a.PickedTrackTable," table mb-0"),children:[Object(u.jsx)("thead",{className:"table-dark",children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{scope:"col",style:{width:"5%",textAlign:"right"},children:"#"}),Object(u.jsx)("th",{scope:"col",children:"Title"}),Object(u.jsx)("th",{scope:"col",style:{width:"25%",textAlign:"right"},children:"Votes"})]})}),Object(u.jsx)("tbody",{children:o.map((function(e){var a=n.filter((function(t){return e.pickerIds.includes(t.id)})),r=e.diskNumber===t.topDiskNumber&&e.trackNumber===t.topTrackNumber;return Object(u.jsx)(He,{pickedTrack:e,pickers:a,isTopTrack:r},"".concat(e.diskNumber,".").concat(e.trackNumber))}))})]}),Object(u.jsx)("div",{className:"d-flex justify-content-center mb-4",children:Object(u.jsx)("button",{className:Me.a.tracksToggleButton,onClick:function(){i(!s)},children:Object(u.jsx)("p",{children:s?Object(u.jsx)(Pe.a,{icon:Ae.b}):Object(u.jsx)(Pe.a,{icon:Ae.a})})})})]})};var ze=function(e){var t=e.album,n=e.participants,a=e.votesPerParticipant,r=null!==t.tracks&&t.tracks.length>0,c=n.filter((function(e){return e.id===t.posterId}))[0],s=n.length,o=(s*a-t.tracks.filter((function(e){return e.pickerIds.length>0})).length)/(s*a-a),l=Math.floor(100*o),b=function(e,t){var n,a={},r=Object(g.a)(t);try{for(r.s();!(n=r.n()).done;){var c,s=n.value,i=Object(g.a)(s.pickerIds);try{for(i.s();!(c=i.n()).done;){var o=c.value;o in a||(a[o]=[]),a[o].push(s)}}catch(u){i.e(u)}finally{i.f()}}}catch(u){r.e(u)}finally{r.f()}return e.map((function(e){return{participant:e,votes:e.id in a?a[e.id]:[]}}))}(n,t.tracks),d=b.filter((function(e){return 0===e.votes.length})),m=0===d.length;return Object(u.jsxs)("div",{className:"".concat(Le.a.RoundAlbumListItem," row"),children:[Object(u.jsxs)("div",{className:"".concat(Le.a.albumInfoArea," col-lg-4"),children:[Object(u.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(u.jsxs)("div",{className:"".concat(Le.a.posterHeader," d-flex align-items-center mb-3"),children:[Object(u.jsx)(W,{member:c},c.id),Object(u.jsx)("p",{className:"m-0",children:"posted"})]}),Object(u.jsx)(i.b,{to:"/album/"+t.id,style:{textDecoration:"none"},children:Object(u.jsx)("img",{className:"".concat(Le.a.postedAlbumImg),src:t.imageUrl,alt:"".concat(t.title," cover art")})})]}),Object(u.jsx)("div",{className:"flex-grow-1",children:Object(u.jsxs)("div",{className:Le.a.albumDescription,children:[Object(u.jsx)(i.b,{to:"/album/"+t.id,style:{textDecoration:"none"},children:Object(u.jsx)("h2",{className:"text-center",children:t.title})}),Object(u.jsx)("h3",{className:"text-center mb-2",children:t.artists.join(", ")}),Object(u.jsxs)("div",{className:"".concat(Le.a.albumStatsArea," mb-0"),children:[m?Object(u.jsx)("div",{className:"m-0",children:Object(u.jsx)(Re,{album:t,title:"Hello"})}):null,m?Object(u.jsxs)("p",{className:"m-0",title:"Vote overlap score. There is 100% overlap if everyone votes for the same songs, and 0% overlap if everyone votes for different songs.",children:[Object(u.jsx)(Pe.a,{icon:Ae.c})," ",l,"%"]}):Object(u.jsx)(Se,{unfinishedParticipants:d})]})]})})]}),Object(u.jsx)("div",{className:"col-lg-8",children:r?Object(u.jsx)(Ee,{album:t,participants:n}):Object(u.jsx)("p",{children:"Picks not posted"})})]})};var Ve=function(e){var t=e.albums,n=e.participants,a=e.votesPerParticipant;return Object(u.jsx)("div",{className:Ie.a.AlbumList,children:t.map((function(e){return Object(u.jsx)(ze,{album:e,participants:n,votesPerParticipant:a},e.id)}))})};function Je(e){var t=e.participantIds.map((function(e){return fetch("https://tb-music-club.herokuapp.com/api/member?id="+e).then((function(e){return e.json()}))}));return Promise.all(t)}function Be(e){var t=e.albumIds.map((function(e){return fetch("https://tb-music-club.herokuapp.com/api/album?id="+e).then((function(e){return e.json()}))}));return Promise.all(t)}var Ue=function(){var e=Object(o.f)().id,t=Object(a.useState)(null),n=Object(j.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)([]),i=Object(j.a)(s,2),l=i[0],b=i[1],p=Object(a.useState)([]),f=Object(j.a)(p,2),h=f[0],x=f[1];Object(a.useEffect)((function(){var t=function(){var t=Object(m.a)(d.a.mark((function t(){var n,a,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(e);case 2:return n=t.sent,c(n),t.next=6,Je(n);case 6:return(a=t.sent).sort((function(e,t){return e.lastName<t.lastName?-1:e.lastName>t.lastName?1:e.firstName<t.firstName?-1:1})),b(a),t.next=11,Be(n);case 11:r=t.sent,x(r);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]);var O=function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://tb-music-club.herokuapp.com/api/round?id="+t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null===r?null:Object(u.jsxs)("div",{children:[Object(u.jsx)(_e,{round:r,participants:l}),Object(u.jsx)("hr",{className:"mt-3 mb-5"}),Object(u.jsx)(Ve,{albums:h,participants:l,votesPerParticipant:r.picksPerParticipant})]})};var Ge=function(){return Object(u.jsx)(i.a,{children:Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(l,{}),Object(u.jsx)("div",{className:"h-100 container",children:Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/",component:ie}),Object(u.jsx)(o.a,{exact:!0,path:"/album/:id",component:H}),Object(u.jsx)(o.a,{exact:!0,path:"/member/:id",component:xe}),Object(u.jsx)(o.a,{exact:!0,path:"/round/:id",component:Ue})]})})]})})};n(362);s.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(Ge,{})}),document.getElementById("root"))},42:function(e,t,n){e.exports={RoundAlbumListItem:"RoundAlbumListItem_RoundAlbumListItem__DFq_N",albumInfoArea:"RoundAlbumListItem_albumInfoArea__1XPa-",posterHeader:"RoundAlbumListItem_posterHeader__qpSkl",postedAlbumImg:"RoundAlbumListItem_postedAlbumImg__3UJg6",iconOverlay:"RoundAlbumListItem_iconOverlay__XyHUa",missingLabel:"RoundAlbumListItem_missingLabel__Lfmcv",albumDescription:"RoundAlbumListItem_albumDescription__3JI0X",albumStatsArea:"RoundAlbumListItem_albumStatsArea__3eyca",MissingVotesInfo:"RoundAlbumListItem_MissingVotesInfo__3ZCUQ",missingVotesParticipantsList:"RoundAlbumListItem_missingVotesParticipantsList__1H4Sx"}},43:function(e,t,n){e.exports={CurrentRoundJumbotron:"CurrentRoundJumbotron_CurrentRoundJumbotron__3M7eO",roundDate:"CurrentRoundJumbotron_roundDate__2lcxF",currentRoundThumbnail:"CurrentRoundJumbotron_currentRoundThumbnail__270j7"}},56:function(e,t,n){e.exports={AlbumHeader:"AlbumHeader_AlbumHeader__4ds3e",albumInfo:"AlbumHeader_albumInfo__3IXWa",albumMetadata:"AlbumHeader_albumMetadata__2UXlY",genreTagList:"AlbumHeader_genreTagList__3k9yd",genreTag:"AlbumHeader_genreTag__3-HFo",albumImgContainer:"AlbumHeader_albumImgContainer__MW2iB",albumImg:"AlbumHeader_albumImg__5Ha0y"}},60:function(e,t,n){e.exports={MemberIcon:"MemberIcons_MemberIcon__1SDIt",MemberIconSmall:"MemberIcons_MemberIconSmall__DCKz-",MemberIconMedium:"MemberIcons_MemberIconMedium__G4WLZ",link:"MemberIcons_link__1aPuT",spinner:"MemberIcons_spinner__ptCL7",spin:"MemberIcons_spin__24PHt"}},73:function(e,t,n){e.exports={chartGallery:"AlbumView_chartGallery__IpjYT",chartArea:"AlbumView_chartArea__2-0KK"}},74:function(e,t,n){e.exports={chartGallery:"MemberView_chartGallery__1i5JT",chartArea:"MemberView_chartArea__2QoJB"}}},[[363,1,2]]]);
//# sourceMappingURL=main.72b1f4ec.chunk.js.map